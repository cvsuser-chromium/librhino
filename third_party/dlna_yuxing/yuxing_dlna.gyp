# Copyright (c) 2012 The Chromium Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.
{
  'targets': [
    {
      'configurations': {
        'Debug': {
          'defines': [
            'DEBUG',
            'DLNA_ENABLE_LOG',
          ],
        },
        'Release': {
        },
      },
      'target_name': 'yuxing_dlna_impl',
      'type': '<(component)',
      'dependencies': [
        '<(DEPTH)/base/base.gyp:base',
        '<(DEPTH)/rhino/third_party/json-c/json_c.gyp:json_c',
        '<(DEPTH)/rhino/third_party/libupnp-1.6.18/libupnp.gyp:libupnp',
      ],
      'defines': [
        'HAVE_CONFIG_H',
        '_FILE_OFFSET_BITS=64',
        '_XOPEN_SOURCE=500',
      ],
      'include_dirs': [
        '.',
        'dlna/dmc/src/h',
        'dlna/common',
        'jse',
        'renderer',
        'underneath',
				'dlna/dmc/src/c',
      ],
      'direct_dependent_settings': {
        'include_dirs': [
          'dlna/common',
        ],
        'linkflags': [
        ],
      },
      'export_dependent_settings': [
        #'<(DEPTH)/base/base.gyp:base',
      ],
      'sources': [
        'dlna/dmc/src/c/coo.c',
        'dlna/dmc/src/c/device.c',
        'dlna/dmc/src/c/device_list.c',
        'dlna/dmc/src/c/dlna_api.c',
        'dlna/dmc/src/c/dmrcp.c',
        'dlna/dmc/src/c/dmscp.c',
        'dlna/dmc/src/c/hitTime.c',
        'dlna/dmc/src/c/ipc.c',
        'dlna/dmc/src/c/ipc_common.c',
        'dlna/dmc/src/c/ipc_huawei.c',
        'dlna/dmc/src/c/ipc_yuxing_fake.c',
        'dlna/dmc/src/c/ipc_yuxing_object.c',
        'dlna/dmc/src/c/js_api.c',
        'dlna/dmc/src/c/js_common.c',
        'dlna/dmc/src/c/js_eventqueue.c',
        'dlna/dmc/src/c/js_huawei.c',
        'dlna/dmc/src/c/js_huawei_maroc.c',
        'dlna/dmc/src/c/js_huawei_v1r5.c',
        'dlna/dmc/src/c/js_yuxing.c',
        'dlna/dmc/src/c/log.c',
        'dlna/dmc/src/c/object.c',
        'dlna/dmc/src/c/service.c',
        'dlna/dmc/src/c/string_util.c',
        'dlna/dmc/src/c/talloc.c',
        'dlna/dmc/src/c/talloc_util.c',
        'dlna/dmc/src/c/upnp_util_dmc.c',
        'dlna/dmc/src/c/xml_util.c',
        'dlna/dmr/src/jse/direct_huawei.c',
        'dlna/dmr/src/jse/direct_yuxing.c',
        'dlna/dmr/src/jse/mrcp_yuxing.c',
        'dlna/dmr/src/renderer/upnp_render.cc',
        'dlna/dmr/src/renderer/upnp_util_dmr.c',
        'dlna/dmr/src/underneath/dtcp_client.c',
        'dlna/dmr/src/underneath/x_avplayer.c',
        'dlna/dmr/src/underneath/x_imageplayer.c',
        'dlna/dmr/src/underneath/x_renderingcontrol.c',
        'dlna/dms/dlnaInfo/src/audio_aac.c',
        'dlna/dms/dlnaInfo/src/audio_ac3.c',
        'dlna/dms/dlnaInfo/src/audio_amr.c',
        'dlna/dms/dlnaInfo/src/audio_atrac3.c',
        'dlna/dms/dlnaInfo/src/audio_g726.c',
        'dlna/dms/dlnaInfo/src/audio_lpcm.c',
        'dlna/dms/dlnaInfo/src/audio_mp2.c',
        'dlna/dms/dlnaInfo/src/audio_mp3.c',
        'dlna/dms/dlnaInfo/src/audio_wma.c',
        'dlna/dms/dlnaInfo/src/av_mpeg1.c',
        'dlna/dms/dlnaInfo/src/av_mpeg2.c',
        'dlna/dms/dlnaInfo/src/av_mpeg4_part10.c',
        'dlna/dms/dlnaInfo/src/av_mpeg4_part2.c',
        'dlna/dms/dlnaInfo/src/av_wmv9.c',
        'dlna/dms/dlnaInfo/src/containers.c',
        'dlna/dms/dlnaInfo/src/image_jpeg.c',
        'dlna/dms/dlnaInfo/src/image_png.c',
        'dlna/dms/dlnaInfo/src/profiles.c',
        'dlna/dms/dlnaInfo/src/upnp_dms.c',
        'dlna/dms/server/c/cds.c',
        'dlna/dms/server/c/cms.c',
        'dlna/dms/server/c/http.c',
        'dlna/dms/server/c/metadata.c',
        'dlna/dms/server/c/mime.c',
        'dlna/dms/server/c/services.c',
        'dlna/dms/server/c/buffer.c',
        'dlna/dms/server/c/content.c',
        'dlna/dms/server/c/redblack.c',
        'dlna/dms/server/c/add_usb.c',
        'dlna/dms/server/c/adding_thread.c',
        'dlna/dms/server/c/entry_json.c',
        'dlna/dms/server/c/upnp_entry.c',
        'dlna/dms/server/c/filetree.c',
        'dlna/dms/server/c/ushare.c',
      ],
      'conditions': [
        ['OS=="linux"', {
          'defines': [
              'LINUX_DEFINE',
          ],
          'include_dirs': [
              'include/linux',
          ],
          'cflags': [
            '-g',
            '-O2',
            '-Wall',
          ]
        }],
        ['OS=="android"', {
          'dependencies': [
          ],
          'cflags': [
            '-include <(DEPTH)/rhino/include/rhino_config.h',
          ],
          'sources!': [                         
            'dlna/dmr/src/underneath/dtcp_client.c',
            'dlna/dmr/src/underneath/x_avplayer.c',
            'dlna/dmr/src/underneath/x_imageplayer.c',
            'dlna/dmr/src/underneath/x_renderingcontrol.c',           
            'dlna/dmr/src/jse/direct_huawei.c',
            'dlna/dmr/src/jse/direct_yuxing.c',
            'dlna/dms/dlnaInfo/src/audio_aac.c',
            'dlna/dms/dlnaInfo/src/audio_ac3.c',
            'dlna/dms/dlnaInfo/src/audio_amr.c',
            'dlna/dms/dlnaInfo/src/audio_atrac3.c',
            'dlna/dms/dlnaInfo/src/audio_g726.c',
            'dlna/dms/dlnaInfo/src/audio_lpcm.c',
            'dlna/dms/dlnaInfo/src/audio_mp2.c',
            'dlna/dms/dlnaInfo/src/audio_mp3.c',
            'dlna/dms/dlnaInfo/src/audio_wma.c',
            'dlna/dms/dlnaInfo/src/av_mpeg1.c',
            'dlna/dms/dlnaInfo/src/av_mpeg2.c',
            'dlna/dms/dlnaInfo/src/av_mpeg4_part10.c',
            'dlna/dms/dlnaInfo/src/av_mpeg4_part2.c',
            'dlna/dms/dlnaInfo/src/av_wmv9.c',
            'dlna/dms/dlnaInfo/src/containers.c',
            'dlna/dms/dlnaInfo/src/image_jpeg.c',
            'dlna/dms/dlnaInfo/src/image_png.c',
            'dlna/dms/dlnaInfo/src/profiles.c',
            'dlna/dms/dlnaInfo/src/upnp_dms.c',
            'dlna/dms/server/c/cds.c',
            'dlna/dms/server/c/cms.c',
            'dlna/dms/server/c/http.c',
            'dlna/dms/server/c/metadata.c',
            'dlna/dms/server/c/mime.c',
            'dlna/dms/server/c/services.c',
            'dlna/dms/server/c/buffer.c',
            'dlna/dms/server/c/content.c',
            'dlna/dms/server/c/redblack.c',
            'dlna/dms/server/c/add_usb.c',
            'dlna/dms/server/c/adding_thread.c',
            'dlna/dms/server/c/entry_json.c',
            'dlna/dms/server/c/upnp_entry.c',
            'dlna/dms/server/c/filetree.c',
            'dlna/dms/server/c/ushare.c',
          ],
        }],
        ['OS=="win"', {
          'defines': [
            'OS_WIN32',
            'WIN32',
            'UPNP_STATIC_LIB',
            '__PRETTY_FUNCTION__=__FUNCTION__',
            'UPNP_USE_MSVCPP',
            '_CRT_NONSTDC_NO_WARNINGS',
            '_CRT_NONSTDC_NO_DEPRECATE',
            '_CRT_SECURE_NO_WARNINGS',
            '_CRT_SECURE_NO_DEPRECATE',
            '_SECURE_SCL',
            '_SCL_SECURE_NO_WARNINGS',
            '_SCL_SECURE_NO_DEPRECATE',
            '_AFX_SECURE_NO_WARNINGS',
            '_AFX_SECURE_NO_DEPRECATE',
            '_SECURE_ATL',
            '_ATL_NO_COM_SUPPORT',
            '_ATL_SECURE_NO_WARNINGS',
            '_ATL_SECURE_NO_DEPRECATE',
          ],
          'defines!': [
            'DLNA_ENABLE_LOG',
          ],
          'include_dirs': [            
            'build/msvc',                  
            '$(WEBKITOUTPUTDIR)/include',
            '$(WEBKITOUTPUTDIR)/include/pthread'
          ],
          'cflags': [
            '/W3',
            '/wd4996',
            '/nologo',
          ],
          'sources!': [
            'dlna/dmc/src/c/coo.c',
            'dlna/dmc/src/c/device.c',
            'dlna/dmc/src/c/device_list.c',
            'dlna/dmc/src/c/dlna_api.c',
            'dlna/dmc/src/c/dmrcp.c',
            'dlna/dmc/src/c/dmscp.c',
            'dlna/dmc/src/c/hitTime.c',
            'dlna/dmc/src/c/ipc.c',
            'dlna/dmc/src/c/ipc_common.c',
            'dlna/dmc/src/c/ipc_huawei.c',
            'dlna/dmc/src/c/ipc_yuxing_fake.c',
            'dlna/dmc/src/c/ipc_yuxing_object.c',
            'dlna/dmc/src/c/js_api.c',
            'dlna/dmc/src/c/js_common.c',
            'dlna/dmc/src/c/js_eventqueue.c',
            'dlna/dmc/src/c/js_huawei.c',
            'dlna/dmc/src/c/js_huawei_maroc.c',
            'dlna/dmc/src/c/js_huawei_v1r5.c',
            'dlna/dmc/src/c/js_yuxing.c',
            'dlna/dmc/src/c/log.c',
            'dlna/dmc/src/c/object.c',
            'dlna/dmc/src/c/service.c',
            'dlna/dmc/src/c/string_util.c',
            'dlna/dmc/src/c/talloc.c',
            'dlna/dmc/src/c/talloc_util.c',
            'dlna/dmc/src/c/upnp_util_dmc.c',
            'dlna/dmc/src/c/xml_util.c',
            'dlna/dmr/src/jse/direct_huawei.c',
            'dlna/dmr/src/jse/direct_yuxing.c',
            'dlna/dmr/src/jse/mrcp_yuxing.c',
            #'dlna/dmr/src/renderer/upnp_render.cc',
            #'dlna/dmr/src/renderer/upnp_util_dmr.c',
            'dlna/dmr/src/underneath/dtcp_client.c',
            'dlna/dmr/src/underneath/x_avplayer.c',
            'dlna/dmr/src/underneath/x_imageplayer.c',
            'dlna/dmr/src/underneath/x_renderingcontrol.c',
            'dlna/dms/dlnaInfo/src/audio_aac.c',
            'dlna/dms/dlnaInfo/src/audio_ac3.c',
            'dlna/dms/dlnaInfo/src/audio_amr.c',
            'dlna/dms/dlnaInfo/src/audio_atrac3.c',
            'dlna/dms/dlnaInfo/src/audio_g726.c',
            'dlna/dms/dlnaInfo/src/audio_lpcm.c',
            'dlna/dms/dlnaInfo/src/audio_mp2.c',
            'dlna/dms/dlnaInfo/src/audio_mp3.c',
            'dlna/dms/dlnaInfo/src/audio_wma.c',
            'dlna/dms/dlnaInfo/src/av_mpeg1.c',
            'dlna/dms/dlnaInfo/src/av_mpeg2.c',
            'dlna/dms/dlnaInfo/src/av_mpeg4_part10.c',
            'dlna/dms/dlnaInfo/src/av_mpeg4_part2.c',
            'dlna/dms/dlnaInfo/src/av_wmv9.c',
            'dlna/dms/dlnaInfo/src/containers.c',
            'dlna/dms/dlnaInfo/src/image_jpeg.c',
            'dlna/dms/dlnaInfo/src/image_png.c',
            'dlna/dms/dlnaInfo/src/profiles.c',
            'dlna/dms/dlnaInfo/src/upnp_dms.c',
            'dlna/dms/server/c/cds.c',
            'dlna/dms/server/c/cms.c',
            'dlna/dms/server/c/http.c',
            'dlna/dms/server/c/metadata.c',
            'dlna/dms/server/c/mime.c',
            'dlna/dms/server/c/services.c',
            'dlna/dms/server/c/buffer.c',
            'dlna/dms/server/c/content.c',
            'dlna/dms/server/c/redblack.c',
            'dlna/dms/server/c/add_usb.c',
            'dlna/dms/server/c/adding_thread.c',
            'dlna/dms/server/c/entry_json.c',
            'dlna/dms/server/c/upnp_entry.c',
            'dlna/dms/server/c/filetree.c',
            'dlna/dms/server/c/ushare.c',
          ],
        }]
      ]
    },
  ],
}

